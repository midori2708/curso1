!function(){"use strict";var t=function(t,o){if(Object.keys)for(var e=Object.keys(o),n=0;n<e.length;n++)t[e[n]]=o[e[n]]},o=function(){return"undefined"!=typeof $&&$.hasOwnProperty("ajax")},e=function(t,e){try{o()&&n(t,e)}catch(i){}},n=function(t,o){var e=0,n={url:t,method:"POST",data:{data:o},xhrFields:{withCredentials:!1}},i=function(){$.ajax(n).fail(function(t,o,r){e>=5||(e+=1,setTimeout(function(){i(n)},1e3*e))})};i()},i=function(o,e,n){"string"!=typeof o&&(o="no valid message in log");var i={message:o};try{t(i,e),void 0===n||("string"==typeof n?i.info=n:"number"==typeof n?i.info=n.toString():"object"==typeof n?t(i,n):i.info=JSON.stringify(n))}catch(r){i.info="message: "+o,i.message="exception in logger",i.exception_message=r.message,e.hasOwnProperty("job_id")&&(i.job_id=e.job_id),e.hasOwnProperty("extra_uid")&&(i.extra_uid=e.extra_uid)}return i},r=function(t){void 0===t&&(t="/api/z"),this.url=t,this.baseLogData={},this.numberOfLogsSent=0,this.maxNumberOfLogs=null};r.prototype.addLogData=function(t,o){this.baseLogData[t]=o},r.prototype.log=function(t,o,n){if(this.numberOfLogsSent++,!(null!==this.maxNumberOfLogs&&this.maxNumberOfLogs>0&&this.numberOfLogsSent>this.maxNumberOfLogs))try{var r=i(t,this.baseLogData,o);void 0!==n&&(r.level=n),e(this.url,r)}catch(a){}},r.prototype.debug=function(t,o){this.log(t,o,100)},r.prototype.info=function(t,o){this.log(t,o,200)},r.prototype.notice=function(t,o){this.log(t,o,250)},r.prototype.warning=function(t,o){this.log(t,o,300)},r.prototype.error=function(t,o){this.log(t,o,400)},r.prototype.critical=function(t,o){this.log(t,o,500)},r.prototype.alert=function(t,o){this.log(t,o,550)},r.prototype.emergency=function(t,o){this.log(t,o,600)};var a={createUUID4:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}},s=a.createUUID4(),c=new r;c.addLogData("extra_uid",s),c.maxNumberOfLogs=500,function(t){var o=window.onerror;window.onerror=function(e,n,i,r,a){if("Script error."!==e&&"Script error"!==e&&"Access is denied."!==e){var s={exception_message:e,exception_source:n,exception_line:i};if(r&&(s.exception_column=r),a&&a.stack){var c="no valid stack info";if("string"==typeof a.stack)c=a.stack;else try{c=JSON.stringify(a.stack)}catch(f){c="failed to create stack: "+f.message}s.exception_stack=c}return t.error("Uncaught JS Exception",s),"function"==typeof o&&o(e,n,i,r,a),!1}}}(c),window.qgLogger=c}();